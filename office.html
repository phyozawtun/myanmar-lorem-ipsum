<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-CuOF+2SnTUfTwSZjCXf01h7uYhfOBuxIhGKPbfEJ3+FqH/s6cIFN9bGr1HmAg4fQ" crossorigin="anonymous">

    <title>Myanmar "Lorem Ipsum"</title>
  </head>
  <body>

    <section class="pt-5 pb-1 text-center container-fluid bg-light bg-gradient">
      <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
          <h1 class="fw-light">Myanmar Lorem Ipsum</h1>
          <p class="lead text-muted">Myanmar "Lorem Ipsum" Text Generator</p>
          <a class="btn btn-lg btn btn-primary mb-3" id="btn_dummy_generate" href="#" role="button">Generate & Copy</a>
        </div>
      </div>
    </section>

    <main class="container d-none">
      <div class="bg-light p-3 mt-5 rounded border">
<textarea class="form-control my-3" name="org_text" id="org_text" rows="5">အစဦးတွင် ဗမာလူမျိုးတို့သည် ကျောက်ဆည်ခရိုင် ဒေသများတွင် အခြေချပြီး တစ်နယ်တစ်မင်း ထူထောင်ကာ စုစည်းနေထိုင်ကြရာမှ
အေဒီ ၁၀ ရာစုသို့ရောက်သည့်အခါ ပုဂံမင်းသည် အင်အားအကြီးဆုံးအဖြစ် အသိအမှတ်ပြုခံရကာ မင်းကြီး ဖြစ်လာသည်။
သို့သော် အစောပိုင်း ပုဂံမင်းဆက်များအကြောင်းမှာ ပါးစပ်ပြောရာဇဝင်သာရှိပြီး တိကျသည့် သမိုင်းအထောက်အထားများကိုမူ ရှာဖွေမတွေ့ရချေ။
အထောက်အထားများကို အစောဆုံး စတင်ကာတွေ့ရသည့် အနော်ရထာ မင်းလက်ထက်အရောက်တွင် ထေရဝါဒ ဗုဒ္ဓဘာသာကို သက်ဝင်ယုံကြည်လာကြပြီး
နိုင်ငံရေး ဩဇာအရလည်း အထွတ်အထိပ်သို့ရောက်လာခဲ့သည်။ ပုဂံအင်ပါယာနှင့်ခမာအင်ပါယာတို့သည် ခေတ်ပြိုင်အင်အားကြီးအင်ပါယာများဖြစ်သည်။
သို့သော် ၎င်းအလွန်တွင်နန်းတက်သည့် စောလူးမင်း၏ အရည်အချင်းညံ့ဖျင်းမှုများကြောင့် တိုင်းပြည်ပြိုကွဲလုနီးနီး အန္တရာယ်ကျရောက်ခဲ့ပြီး
၎င်းလည်း ရန်သူ့လက်ချက်ဖြင့် အနိစ္စရောက်ရသည်။ ၎င်းအလွန်တွင် နန်းစံကြသည့် ကျန်စစ်သား နှင့် အလောင်းစည်သူ
မင်းများလက်ထက်တွင် တစ်ဖန်အင်အားဩဇာ ပြည့်ဝကြသော်လည်း ထိုမင်းများလွန်လျှင် ပုဂံ၏ဩဇာမှာ တစ်ဖန်ကျဆင်းသွားရပြန်သည်။</textarea>


      </div>
    </main>

    <main class="container">
      <div class="bg-light p-3 mt-3 rounded border">
        <h1 class="h3">Office</h1>
        <div class="col-12 pb-3">
          <a class="btn btn-secondary" href="index.html">Pali + Myanmar</a>
          <a class="btn btn-secondary" href="government.html">Government</a>
          <a class="btn btn-secondary" href="office.html">Office</a>
          <a class="btn btn-secondary" href="pali.html">Pali</a>
          <a class="btn btn-secondary" href="shan.html">Shan</a>
          <a class="btn btn-secondary" href="kayin.html">Kayin</a>
        </div>
        <textarea class="form-control" id="dummy_text" rows="12"></textarea>
      </div>
    </main>

    <footer class="text-muted py-5">
      <div class="container text-center">
        <ul class="list-inline mb-0">
          <li class="list-inline-item"><a href="index.html">Home</a></li>
          <li class="list-inline-item"><a href="about.html">About</a></li>
          <li class="list-inline-item"><a href="https://github.com/phyozawtun/myanmar-lorem-ipsum/" target="_blank">GitHub</a></li>
        </ul>
        <p>
          2020 © All right reserved by Myanmar Lorem Ipsum. <br>
          This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0</a> International License.<br>
          Feel free to use on commercial or none-commercial with or without credit.<br>
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-popRpmFF9JQgExhfw5tZT4I9/CI5e2QcuUZPOVXb1m7qUmeR2b50u+YFEYe1wgzy" crossorigin="anonymous"></script>
    <script type="text/javascript">

      const myConsonant = "\u1000-\u1021"; // "က-အ"

      const enChar = "a-zA-Z0-9";

      // "ဣဤဥဦဧဩဪဿ၌၍၏၀-၉၊။!-/:-@[-`{-~\s"
      const otherChar = "\u1023\u1024\u1025\u1026\u1027\u1029\u102a\u103f\u104c\u104d\u104f\u1040-\u1049\u104a\u104b!-/:-@\\[-`\\{-~\\s";

      const ssSymbol = "\u1039";

      const ngaThat = "\u1004\u103a";

      const aThat = "\u103a";

      // Regular expression pattern for Myanmar syllable breaking
      // *** a consonant not after a subscript symbol AND a consonant is not
      // followed by a-That character or a subscript symbol
      //const BREAK_PATTERN = new RegExp("((?<!" + ssSymbol + ")[" + myConsonant + "](?![" + aThat + ssSymbol + "])" + "|[" + enChar + otherChar + "])", "mg");
      const BREAK_PATTERN = new RegExp("((?!" + ssSymbol + ")[" + myConsonant + "](?![" + aThat + ssSymbol + "])" + "|[" + enChar + otherChar + "])", "mg");

      /*
      [a-zA-Z0-9]

      (?<=a)
      /(?<!Mr)\. *\b\w+\b/gi
      /((?!Mr).{2}|^.?)\. *\b\w+\b/gi


      /^(?!-)[a-zA-Z0-9\-]{1,20}(?<!-)$/
      /^(?!-)[a-zA-Z0-9\-]{0,19}[a-zA-Z0-9]$/
      */

      //const BREAK_PATTERN = new RegExp('\(\(?<!' + ssSymbol + '\)\[' + myConsonant + '\]\(?!\[' + aThat + ssSymbol + '\]\)' + '|\[' + enChar + otherChar + '\]\)', 'mg');

      function segment(text) {
        var outArray = text.replace(BREAK_PATTERN, "𝕊$1").split('𝕊')
        if (outArray.length > 0) {
          outArray.shift();
          //out.splice(0, 1);
        }
        return outArray;
      }

      function segmentWithSeparator(text, separator) {
        if (separator === undefined) {
          separator = "|";
        }
        return text.replace(BREAK_PATTERN, separator + "$1");
      }



      // random number between range
      function getRandomInt(min, max) {
        random = Math.random() * (max - min) + min;
        return Math.floor(random);
      }

      // create dummy latter
      function createLetter(letter){
        rand_index = getRandomInt(0, letter.length);
        return letter[rand_index];
      }

      // create dummy word
      function createWord(letter) {
        word = "";
        var i = 0, len = getRandomInt(2, 6);
        while (i < len) {
            word += createLetter(letter);
            i++;
        }
        return word;
      }

      // create dummy sentence
      function createSentence(letter) {
        var sentence = createWord(letter);
        var i = 0, len = getRandomInt(3, 9);
        while (i < len) {
            sentence += " "+ createWord(letter);
            i++;
        }
        sentence += "။";
        return sentence;
      }

      // create dummy paragraph
      function createParagraph(letter) {
        var paragraph = createSentence(letter);
        var i = 0, len = getRandomInt(7, 9);
        while (i < len) {
            paragraph += " "+ createSentence(letter);
            i++;
        }
        return paragraph;
      }

      // create ran dummy text | create 5 paragraph
      function createDummyText(letter){
        /*
        var dummyText = "<p>"+createParagraph(letter)+"</p>";
        dummyText += "<p>"+createParagraph(letter)+"</p>";
        dummyText += "<p>"+createParagraph(letter)+"</p>";
        dummyText += "<p>"+createParagraph(letter)+"</p>";
        dummyText += "<p>"+createParagraph(letter)+"</p>";
        */
        var dummyText = createParagraph(letter)+"\n\n";
        dummyText += createParagraph(letter)+"\n\n";
        dummyText += createParagraph(letter)+"\n\n";
        dummyText += createParagraph(letter)+"\n\n";
        dummyText += createParagraph(letter)+"\n\n";
        return dummyText;
      }

      // Write dummy text
      function writeDummyText(letter){
        document.getElementById("dummy_text").value = "Generating ...";
        dummyText = createDummyText(letter);
        document.getElementById("dummy_text").value = dummyText;
        return dummyText;
      }

      text = document.getElementById("org_text").value;
      text = text.split("။").join("");
      text = text.split("၊").join("");
      text = text.split(" ").join("");
      text = text.replace(/\s/g,'');

      letter = segment(text);
      alert_test = segmentWithSeparator(text);
      //alert(alert_test);
      //console.log(alert_test);

      // Mix up and random the string
      var letter  = letter.sort(function() { return 0.5 - Math.random() });

      // Run the app
      writeDummyText(letter);

      // Button
      document.getElementById("btn_dummy_generate").addEventListener("click", function(e){
        text = document.getElementById("org_text").value;
        text = text.split("။").join("");
        text = text.split("၊").join("");
        text = text.split(" ").join("");
        text = text.replace(/\s/g,'');

        letter = segment(text);
        alert_test = segmentWithSeparator(text);
        writeDummyText(letter);

        // Get the text field
        var copyText = document.getElementById("dummy_text");
        // Select the text field
        copyText.select();
        copyText.setSelectionRange(0, 99999); //For mobile devices
        // Copy the text inside the text field
        document.execCommand("copy");
        e.preventDefault();
      });
    </script>


  </body>
</html>
